<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Udacity Attendance App</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/style.css">
        <style type="text/css">
        input[type=checkbox] {
          -ms-transform: scale(1.5); /* IE */
          -moz-transform: scale(1.5); /* FireFox */
          -webkit-transform: scale(1.5); /* Safari and Chrome */
          -o-transform: scale(1.5); /* Opera */
        }
        </style>
    </head>
    <body>
        <h1>Udacity Attendance</h1>

        <table>
            <thead>
                <tr id="xuliehao">
                    <th class="name-col">Student Name</th>
                    <th class="missed-col" id= 'days'>Days Missed-col</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <!-- <script src="js/jquery.js"></script> -->
        <!-- <script src="js/app.js"></script> -->
    </body>
    <script>
var model =  {
    trName:'student',
    tdName:'name-col',
    tdMissed:'missed-col',
    student:[
    {name:'Slappy the Frog',missed:0},
    {name:'Lilly the Lizard',missed:0},
    {name:'Paulrus the Walrus',missed:0},
    {name:'Gregory the Goat',missed:0},
    {name:'Adam the Anaconda',missed:0},
]
}
var view = {
               init:function(){
                    for(i=0;i<5;i++){
                        document.getElementsByTagName('tbody');
                    var tr = document.createElement('tr');
                    var td1 = document.createElement('td');
                    var td2 = document.createElement('td');
                    tr.setAttribute('class',model.trName);
                    td1.setAttribute('class',model.tdName);
                    td2.setAttribute('class',model.tdMissed);
                    td1.textContent = model.student[i].name;
                    td2.textContent = model.student[i].missed;
                    tr.appendChild(td1);
                    tr.appendChild(td2);
                    document.body.children[1].children[1].appendChild(tr);
                    }
                        for(var i=0;i<12;i++){
                         var xuliehao = document.getElementById('xuliehao');
                          var thsDays = document.getElementById("days");
                        var th = document.createElement('th');
                        th.textContent=(i+1);
                        xuliehao.insertBefore(th,xuliehao.children.days);
                    }
                },
                render:function(){
                                for(i=1;i<6;i++){
                                    view.renderList(i)
                                }
                },
               renderList:function(agu){
                            var allStu = document.getElementsByTagName('tr');
                            var allStuLeng = allStu.length;
                             for(var i=0;i<12;i++){
                              var stu1 = document.getElementsByTagName('tr')[agu];
                              var td = document.createElement('td');
                              var input  = document.createElement('input');
                            td.class   = 'attend-col';
                            input.type = 'checkbox';
                            td.appendChild(input)
                            var lastChild =  document.getElementsByTagName('tr')[agu].children[document.getElementsByTagName('tr')[agu].children.length-1];
                            stu1.insertBefore(td,lastChild)
                            }
            }
        }
var controller = {
    init:function() {
        var a = document.getElementsByTagName('tr')
        for(var i=1;i<=model.student.length;i++){
        for(var j=1;j<13;j++){
        var b = a[i].children
        var elem = b[j].children[0]
        // 闭包
        elem.addEventListener('click',(function(num1,num2){
        return function(){
        var d = a[num1].children
        if(this.checked){d[13].textContent++}else{d[13].textContent--}
        b[num2].children[0].checked
        }
        })(i,j))
        // 闭包
        }}
    }
}    
view.init();
view.render();
controller.init();
    </script>
</html>
